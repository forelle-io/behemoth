{
  "swagger": "2.0",
  "securityDefinitions": {
    "Bearer": {
      "type": "apiKey",
      "name": "Authorization",
      "in": "header"
    }
  },
  "paths": {
    "/api/v1/auth/gateway/send_sms": {
      "post": {
        "tags": [
          "Auth.Gateway"
        ],
        "summary": "",
        "responses": {
          "201": {
            "description": {
              "data": {
                "phone": "79999999999"
              }
            }
          }
        },
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "type": "string",
            "required": true,
            "name": "struct_type",
            "in": "formData",
            "description": "Тип аккаунта"
          },
          {
            "type": "integer",
            "required": true,
            "name": "phone",
            "in": "formData",
            "description": "Телефон"
          }
        ],
        "operationId": "BehemothWeb.Api.V1.Auth.GatewayController.send_sms",
        "description": "Отправка СМС сообщения",
        "consumes": [
          "application/x-www-form-urlencoded"
        ]
      }
    },
    "/api/v1/auth/authenticate/user": {
      "get": {
        "tags": [
          "Auth.Authenticate"
        ],
        "summary": "",
        "responses": {
          "404": {
            "description": {
              "errors": "not found"
            }
          },
          "200": {
            "description": {
              "data": {
                "jwt_token": "UxMiI2InR5cCImIkpXVCJ9.eyJhdW..."
              }
            }
          }
        },
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "type": "integer",
            "required": false,
            "name": "phone",
            "in": "query",
            "description": "Телефон"
          },
          {
            "type": "string",
            "required": false,
            "name": "auth_code",
            "in": "query",
            "description": "Код подтверждения"
          }
        ],
        "operationId": "BehemothWeb.Api.V1.Auth.AuthenticateController.user",
        "description": "Аутентификация",
        "consumes": [
          "application/x-www-form-urlencoded"
        ]
      }
    },
    "/api/v1/auth/authenticate/ping": {
      "get": {
        "tags": [
          "Auth.Authenticate"
        ],
        "summary": "",
        "security": [
          {
            "Bearer": []
          }
        ],
        "responses": {
          "401": {
            "description": {
              "error": "Correct auth token must be provided."
            }
          },
          "200": {
            "description": {
              "message": "pong"
            }
          }
        },
        "parameters": [],
        "operationId": "BehemothWeb.Api.V1.Auth.AuthenticateController.ping",
        "description": "Проверка валидности доступа к закрытым токеном функциям  API"
      }
    },
    "/api/v1/account/users/{id}": {
      "put": {
        "tags": [
          "Account.User"
        ],
        "summary": "",
        "security": [
          {
            "Bearer": []
          }
        ],
        "responses": {
          "404": {
            "description": {
              "errors": "not found"
            }
          },
          "403": {
            "description": {
              "errors": "not authorized"
            }
          },
          "401": {
            "description": {
              "errors": "unauthorized"
            }
          },
          "200": {
            "description": {
              "data": {
                "user": {
                  "$ref": "#/definitions/User"
                }
              }
            }
          }
        },
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "type": "integer",
            "required": true,
            "name": "id",
            "in": "path",
            "description": "Id пользователя"
          },
          {
            "type": "date",
            "required": false,
            "name": "user[first_name]",
            "in": "query",
            "description": "Имя"
          },
          {
            "type": "date",
            "required": false,
            "name": "user[last_name]",
            "in": "query",
            "description": "Фамилия"
          },
          {
            "type": "date",
            "required": false,
            "name": "user[birthday]",
            "in": "query",
            "description": "Дата рождения"
          }
        ],
        "operationId": "BehemothWeb.Api.V1.Account.UserController.update",
        "description": "Обновление пользователя",
        "consumes": [
          "application/x-www-form-urlencoded"
        ]
      },
      "get": {
        "tags": [
          "Account.User"
        ],
        "summary": "",
        "security": [
          {
            "Bearer": []
          }
        ],
        "responses": {
          "200": {
            "description": {
              "data": {
                "user": {
                  "$ref": "#/definitions/User"
                }
              }
            }
          }
        },
        "parameters": [
          {
            "type": "integer",
            "required": true,
            "name": "id",
            "in": "path",
            "description": "Id пользователя"
          }
        ],
        "operationId": "BehemothWeb.Api.V1.Account.UserController.show",
        "description": "Получение информации о пользователе"
      },
      "delete": {
        "tags": [
          "Account.User"
        ],
        "summary": "",
        "security": [
          {
            "Bearer": []
          }
        ],
        "responses": {
          "404": {
            "description": {
              "errors": "not found"
            }
          },
          "403": {
            "description": {
              "errors": "forbidden"
            }
          },
          "204": {
            "description": ""
          }
        },
        "parameters": [
          {
            "type": "integer",
            "required": true,
            "name": "id",
            "in": "path",
            "description": "Id пользователя"
          }
        ],
        "operationId": "BehemothWeb.Api.V1.Account.UserController.delete",
        "description": "Удаление пользователя"
      }
    },
    "/api/v1/account/users": {
      "post": {
        "tags": [
          "Account.User"
        ],
        "summary": "",
        "responses": {
          "422": {
            "description": {
              "errors": {
                "phone": [
                  "has already been taken"
                ]
              }
            }
          },
          "201": {
            "description": {
              "data": {
                "user": {
                  "$ref": "#/definitions/User"
                }
              }
            }
          }
        },
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "type": "integer",
            "required": true,
            "name": "user[phone]",
            "in": "formData",
            "description": "Телефон"
          },
          {
            "type": "string",
            "required": false,
            "name": "user[first_name]",
            "in": "formData",
            "description": "Имя"
          },
          {
            "type": "string",
            "required": false,
            "name": "user[last_name]",
            "in": "formData",
            "description": "Фамилия"
          },
          {
            "type": "integer",
            "required": false,
            "name": "user[gender]",
            "in": "formData",
            "description": "Пол"
          },
          {
            "type": "date",
            "required": false,
            "name": "user[birthday]",
            "in": "formData",
            "description": "Дата рождения"
          }
        ],
        "operationId": "BehemothWeb.Api.V1.Account.UserController.create",
        "description": "Создание пользователя",
        "consumes": [
          "application/x-www-form-urlencoded"
        ]
      },
      "get": {
        "tags": [
          "Account.User"
        ],
        "summary": "",
        "security": [
          {
            "Bearer": []
          }
        ],
        "responses": {
          "200": {
            "description": {
              "data": {
                "users": {
                  "$ref": "#/definitions/Users"
                }
              }
            }
          }
        },
        "parameters": [],
        "operationId": "BehemothWeb.Api.V1.Account.UserController.index",
        "description": "Список пользователей"
      }
    }
  },
  "info": {
    "version": "1.0",
    "title": "Behemoth API",
    "description": "Получение JWT - токена осущесвляется через запрос `[GET] /api/v1/auth/authenticate/user`.\nПосле выдачи системой JWT - токена, его необходимо передавать в заголовке `Authorization: Bearer token`.\n\nВозможности:\n* Получение JWT - токена по телефону\n* Создание / Редактирование / Удаление / Просмотр / Получение списка пользователя (пользователей)\n"
  },
  "definitions": {
    "Users": {
      "type": "array",
      "title": "Account.Users",
      "items": {
        "$ref": "#/definitions/User"
      },
      "description": "Список пользователей"
    },
    "User": {
      "type": "object",
      "title": "Account.User",
      "required": [
        "updated_at",
        "inserted_at",
        "phone",
        "id"
      ],
      "properties": {
        "updated_at": {
          "type": "timestamp",
          "description": "Дата и время обновления"
        },
        "phone": {
          "type": "integer",
          "description": "Телефон"
        },
        "last_name": {
          "type": "string",
          "description": "Фамилия"
        },
        "inserted_at": {
          "type": "timestamp",
          "description": "Дата и время создания"
        },
        "id": {
          "type": "integer",
          "description": "Id"
        },
        "gender": {
          "type": "string",
          "description": "Пол"
        },
        "first_name": {
          "type": "string",
          "description": "Имя"
        },
        "birthday": {
          "type": "date",
          "description": "Дата рождения"
        }
      },
      "example": {
        "updated_at": "2019-05-31 08:34:17",
        "phone": 79999999999,
        "last_name": "Solovyev",
        "inserted_at": "2019-05-31 08:33:46",
        "id": 1,
        "gender": "male",
        "first_name": "Alexey",
        "birthday": "1994-05-03"
      },
      "description": "Пользователь"
    }
  }
}